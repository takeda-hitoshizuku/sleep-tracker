# 睡眠障害の当事者がアプリを作って、サービス化を考えた話

---

睡眠専門外来に通っていた。

不眠症なのか、概日リズム障害なのか、はっきりしないまま、毎週診察のたびに紙の「睡眠日誌」を書いていた。布団に入った時間、眠れた時間、途中で目が覚めた時間、朝起きた時間。地味で、でも大事な記録。

既存のアプリで代用しようとした。でも、どれも「ちゃうねん」だった。

---

## 「ちゃうねん」の正体

**Apple ヘルスケア**は、入力まで辿りつきにくい。そして「布団に入る」と「眠る」と「目覚める」の区別がない。この3つは全然違う。布団に入ってから2時間眠れない夜というのは、睡眠障害では普通にある。

**Sleep Cycle**は使ってみた。自動計測してくれるのだが、「ちゃうねん」という気持ちが強かった。センサーが拾う体動と、自分が感じる睡眠の実感は一致しない。

だから、自分で作った。

「布団に入る → 眠る → 目覚める → 布団から出る」の4フェーズを明示的に記録できる PWA。夜中にトイレに起きた時刻も記録できる（頻尿は睡眠障害の重要な症状なので）。医師に見せるためのレポートも出力できる。AIによる分析機能も付けた。

---

## サービス化を考えた

ある日、これをサブスクサービスとしてリリースする意義があるか、Claude に聞いてみた。

> **私:** サブスクサービスとして、データベースもちゃんと構築してリリースする意義はあると思いますか？

Claude の返答は「意義はあるが、険しい」というものだった。

意義がある理由として挙げられたのは：AI分析がユーザー自身のAPIキー取得を前提にしていること（これは正直、一般ユーザーには高すぎるハードル）、デバイス間の同期ができないこと、医師への共有が「テキストのコピペ」止まりであること。

懸念点としては：「データが端末から出ない」という現在の設計がそのまま信頼になっていること、医療情報は規制が厳しいこと、Apple や Sleep Cycle という先行サービスの存在。

聞きながら、頭の中では既に方針が決まっていた。

---

## 方針を話した

> **私:** リリースするなら、APIは内部化します。データベースも契約して、アカウントマルチテナントでやります。
>
> データに関しては、そこまで国民のITリテラシーは高くないし、暗号化もしていいと思う。
>
> 私の通っていた睡眠専門外来に声をかけてみたいね。
>
> Appleヘルスケアは使いにくい。入力まで辿りつきにくいし、布団に入ると寝ると眠るの区別がつかない。自動計測も微妙。Sleep Cycleは私も使ったが、ちゃうねんって気持ちが強かった。
>
> リリース方法としてはPWAのまま、Stripe決済でやりたい。

これを受けて、Claude が整理してくれたことがいくつかある。

---

## 「暗号化」と「ハッシュ化」は違う

「暗号化（ハッシュ化？）」と書いたら、ちゃんと訂正してくれた。

- **ハッシュ化**はパスワード用。一方向で復元できない。bcrypt などを使う
- **暗号化**は睡眠データ用。読み返す必要があるので、復元できる必要がある。AES-256 など

なんとなく同じようなものだと思っていたが、用途が全然違う。こういう指摘は助かる。

---

## 通っていたクリニックに声をかける、という話

これは最初から考えていたことだが、改めて整理してみると、かなり強い戦略だと思っている。

睡眠障害の患者は「動機の高いユーザー」だ。毎週記録をつけなければならない。医師に見せるという明確な目的がある。そして、その患者たちに最も接しているのがクリニックだ。

医師が「このアプリ使ってみて」と言えば、患者は使う。広告費ゼロ。信頼コストもほぼゼロ。

さらに、医師側にもメリットがある。患者の睡眠日誌が電子化されれば、診察前に確認できる。紙を見ながら転記する手間が省ける。

将来的には、医師が患者のデータを閲覧できるダッシュボード機能も考えている。

---

## 作るものが見えてきた

技術的な話をまとめると：

- PWA はそのまま。インストール不要という体験は残す
- バックエンドを追加して、APIキーを内部化
- Supabase（PostgreSQL）でデータ管理。マルチテナントは行レベルセキュリティで対応
- Stripe でサブスク決済

機能の出し分けはこんなイメージ：

| 無料 | 有料 |
|---|---|
| 睡眠記録・タイムライン | 全期間の履歴・統計 |
| 直近7日の履歴 | AI分析（APIキー不要） |
| データエクスポート | 医師向けレポート生成 |
| | デバイス間同期・バックアップ |

無料枠を設けるのは、クリニックからの紹介で来た患者がまず試せるようにするため。

---

## 競合がいないわけではないが

Apple ヘルスケアも Sleep Cycle も、「睡眠障害の当事者が医師に提出するために使う」という用途には設計されていない。健常者が睡眠の質を知りたい、というニーズに応えるものだ。

自分が作っているのは、そこじゃない。

「ちゃうねん」と思いながら使い続けたあの時間が、仕様書になっている。

---

*このアプリはまだ開発中です。リリース時期は未定。*
